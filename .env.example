# Policy Bot - Environment Configuration
# Copy this file to .env.local for development or .env for production

# ============================================
# LiteLLM Proxy Configuration
# ============================================
# Authentication keys for LiteLLM proxy (generate with: openssl rand -hex 16)
LITELLM_MASTER_KEY=sk-litellm-master-change-this
LITELLM_SALT_KEY=sk-litellm-salt-change-this

# PostgreSQL database for LiteLLM (virtual keys, spend tracking)
# Use host.docker.internal instead of localhost when running in Docker
LITELLM_DATABASE_URL=postgresql://postgres:password@host.docker.internal:5432/litellm

# ============================================
# LLM Provider Configuration (via LiteLLM Proxy)
# ============================================
# Point to LiteLLM proxy for multi-provider support
# Omit or leave empty to connect directly to OpenAI
OPENAI_BASE_URL=http://localhost:4000/v1

# API Key for LLM requests:
# - When using LiteLLM proxy (OPENAI_BASE_URL set): Use LITELLM_MASTER_KEY value
# - When direct to OpenAI (OPENAI_BASE_URL empty): Use your actual OpenAI API key
OPENAI_API_KEY=sk-your-api-key-here

# ============================================
# Additional LLM Provider Keys (used by LiteLLM)
# ============================================
# Mistral API (for chat and OCR)
MISTRAL_API_KEY=your-mistral-api-key-here

# Azure OpenAI (optional)
AZURE_API_KEY=
AZURE_API_BASE=https://your-resource.openai.azure.com/

# Azure OpenAI Deployment Names (must match your Azure Portal deployments)
AZURE_DEPLOYMENT_GPT41=gpt-41
AZURE_DEPLOYMENT_GPT41_MINI=gpt-41-mini
AZURE_DEPLOYMENT_GPT41_NANO=gpt-41-nano
AZURE_DEPLOYMENT_EMBED_LARGE=text-embedding-3-large
AZURE_DEPLOYMENT_EMBED_SMALL=text-embedding-3-small
AZURE_DEPLOYMENT_EMBED_ADA=text-embedding-ada-002
AZURE_DEPLOYMENT_WHISPER=whisper

# Ollama (local models)
# Use http://host.docker.internal:11434 when running in Docker
OLLAMA_API_BASE=http://localhost:11434

# ============================================
# Azure Document Intelligence (for Office docs)
# ============================================
# Get from Azure Portal > Cognitive Services > Document Intelligence
# Supports: PDF, DOCX, XLSX, PPTX, Images
AZURE_DI_ENDPOINT=https://your-resource.cognitiveservices.azure.com/
AZURE_DI_KEY=your-azure-di-key-here

# ============================================
# Embedding Configuration
# ============================================
# Model name (must match LiteLLM config or OpenAI model)
EMBEDDING_MODEL=text-embedding-3-large

# ============================================
# ChromaDB
# ============================================
# Development: localhost
# Production: chroma (Docker service name)
CHROMA_HOST=localhost
CHROMA_PORT=8000

# ============================================
# Redis
# ============================================
# Development: redis://localhost:6379
# Production: redis://redis:6379
REDIS_URL=redis://localhost:6379

# ============================================
# Authentication (NextAuth)
# ============================================
# Base URL of your application
NEXTAUTH_URL=http://localhost:3000

# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=generate-a-secure-random-string

# Azure AD Configuration (get from Azure Portal > App registrations)
AZURE_AD_CLIENT_ID=
AZURE_AD_CLIENT_SECRET=
AZURE_AD_TENANT_ID=

# Google OAuth Configuration (get from Google Cloud Console > Credentials)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Access control mode:
# - 'allowlist': Only users in the allowed-users.json can sign in (default)
# - 'domain': Any user from ALLOWED_DOMAINS can sign in
ACCESS_MODE=allowlist

# Comma-separated list of allowed email domains (only used when ACCESS_MODE=domain)
ALLOWED_DOMAINS=abhirup.app,gov.gd

# Set to 'true' to disable auth in development
AUTH_DISABLED=true

# ============================================
# Admin Configuration
# ============================================
# Comma-separated list of admin email addresses
ADMIN_EMAILS=mailabhirupbanerjee@gmail.com

# ============================================
# Storage
# ============================================
# Development: ./data
# Production: /app/data
DATA_DIR=./data

# ============================================
# Deployment (Production Only)
# ============================================
# Your domain name
DOMAIN=policybot.abhirup.app

# Email for Let's Encrypt certificate notifications
ACME_EMAIL=mailabhirupbanerjee@gmail.com
