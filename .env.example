# Policy Bot - Environment Configuration
# Copy this file to .env.local for development or .env for production
#
# Legend:
#   [REQUIRED] - Must be set for the application to work
#   [OPTIONAL] - Enhanced features, can be omitted
#   [PRODUCTION] - Required only for production deployment
#   [HAS DEFAULT] - Has a sensible default, override if needed

# ============================================================================
#                           REQUIRED - Core Configuration
# ============================================================================

# [REQUIRED] OpenAI API Key
# - Direct to OpenAI: Your actual OpenAI API key (sk-...)
# - Via LiteLLM proxy: Set to your LITELLM_MASTER_KEY value
OPENAI_API_KEY=sk-your-api-key-here

# [REQUIRED] Admin email addresses (comma-separated)
# These users will have full admin access to the dashboard
ADMIN_EMAILS=admin@example.com

# [REQUIRED for Production] NextAuth secret
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=generate-a-secure-random-string

# ============================================================================
#                         REQUIRED - Infrastructure Services
# ============================================================================

# [REQUIRED] ChromaDB Connection
# Development: localhost | Production: chroma (Docker service name)
CHROMA_HOST=localhost
CHROMA_PORT=8000

# [REQUIRED] Redis Connection
# Development: redis://localhost:6379 | Production: redis://redis:6379
REDIS_URL=redis://localhost:6379

# [REQUIRED] Data storage directory
# Development: ./data | Production: /app/data
DATA_DIR=./data

# ============================================================================
#                      REQUIRED for Production - Authentication
# ============================================================================

# [PRODUCTION] Base URL of your application
NEXTAUTH_URL=http://localhost:3000

# [PRODUCTION] At least one OAuth provider must be configured:

# Azure AD Configuration (get from Azure Portal > App registrations)
AZURE_AD_CLIENT_ID=
AZURE_AD_CLIENT_SECRET=
AZURE_AD_TENANT_ID=

# Google OAuth Configuration (get from Google Cloud Console > Credentials)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# [HAS DEFAULT] Access control mode
# - 'allowlist': Only users in the database can sign in (default)
# - 'domain': Any user from ALLOWED_DOMAINS can sign in
ACCESS_MODE=allowlist

# [OPTIONAL] Comma-separated list of allowed email domains
# Only used when ACCESS_MODE=domain
ALLOWED_DOMAINS=example.com,company.org

# [DEVELOPMENT ONLY] Set to 'true' to disable auth
AUTH_DISABLED=true

# ============================================================================
#                      REQUIRED for Production - Deployment
# ============================================================================

# [PRODUCTION] Your domain name for Traefik routing
DOMAIN=policybot.example.com

# [PRODUCTION] Email for Let's Encrypt certificate notifications
ACME_EMAIL=admin@example.com

# ============================================================================
#                         OPTIONAL - LiteLLM Proxy
# ============================================================================
# Use LiteLLM for multi-provider LLM support (OpenAI, Mistral, Ollama, Azure)
# If not using LiteLLM, leave OPENAI_BASE_URL empty to connect directly to OpenAI

# [OPTIONAL] Point to LiteLLM proxy for multi-provider support
# Leave empty/omit to connect directly to OpenAI
OPENAI_BASE_URL=http://localhost:4000/v1

# [OPTIONAL] LiteLLM authentication keys
# Generate with: openssl rand -hex 16
LITELLM_MASTER_KEY=sk-litellm-master-change-this
LITELLM_SALT_KEY=sk-litellm-salt-change-this

# [OPTIONAL] PostgreSQL database for LiteLLM (virtual keys, spend tracking)
# Use host.docker.internal instead of localhost when running in Docker
LITELLM_DATABASE_URL=postgresql://postgres:password@host.docker.internal:5432/litellm

# ============================================================================
#                      OPTIONAL - Additional LLM Providers
# ============================================================================
# These are used by LiteLLM proxy for multi-provider support

# [OPTIONAL] Mistral API - Used for chat completions and PDF OCR
# Get from: https://console.mistral.ai/api-keys
MISTRAL_API_KEY=

# [OPTIONAL] Google Gemini - Advanced reasoning models with 1M context
# Get from: https://ai.google.dev/
GEMINI_API_KEY=

# [OPTIONAL] Ollama - Local models (no API cost)
# Use http://host.docker.internal:11434 when running in Docker
OLLAMA_API_BASE=http://localhost:11434

# ============================================================================
#                      OPTIONAL - Document Processing
# ============================================================================

# [OPTIONAL] Azure Document Intelligence - Enhanced Office document support
# Supports: PDF, DOCX, XLSX, PPTX, Images with better quality than basic extraction
# Get from Azure Portal > Cognitive Services > Document Intelligence
AZURE_DI_ENDPOINT=
AZURE_DI_KEY=

# ============================================================================
#                      OPTIONAL - RAG Enhancements
# ============================================================================

# [OPTIONAL] Cohere API - Chunk reranking for improved search relevance
# Improves RAG quality by re-scoring retrieved chunks
# Get from: https://dashboard.cohere.com/api-keys
COHERE_API_KEY=

# [OPTIONAL] Tavily API - Web search and URL extraction
# Enables real-time web search and web page content extraction
# Get from: https://tavily.com
TAVILY_API_KEY=

# [OPTIONAL] YouTube transcript extraction
# NOTE: YouTube API key is now configured via Admin > Tools > YouTube
# Get API key from: https://supadata.ai (free $5 credit = ~5000 transcripts)
# The youtube-transcript npm fallback is available but may be blocked by YouTube

# ============================================================================
#                      OPTIONAL - Data Source Encryption
# ============================================================================

# [RECOMMENDED] Encryption key for API credentials stored in database
# Generate with: openssl rand -hex 32
# Required for secure storage of API keys and tokens for external data sources
DATA_SOURCE_ENCRYPTION_KEY=

# [HAS DEFAULT] Embedding model name
# Must match LiteLLM config or OpenAI model
# Default: text-embedding-3-large (3072 dimensions)
EMBEDDING_MODEL=text-embedding-3-large
